<div class="dynamic-item-block detail-item-section card mb-3">
    <div class="card-body">
        <h3>Página de Detalle de Ítem #<%= mainIndex + 1 %></h3>
        <button type="button" class="remove-item-button btn btn-danger btn-sm"><i class="fas fa-trash-alt"></i> Eliminar Página de Detalle</button>

        <h4><i class="fas fa-heading"></i> Sección Hero del Detalle</h4>
        <div class="form-group">
            <label for="itemDetails_<%= mainIndex %>_hero_title">Título Hero:</label>
            <input type="text" id="itemDetails_<%= mainIndex %>_hero_title" name="itemDetails[<%= mainIndex %>][hero][title]" value="<%= itemDetail.hero ? itemDetail.hero.title : '' %>" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="itemDetails_<%= mainIndex %>_hero_subtitle">Subtítulo Hero:</label>
            <input type="text" id="itemDetails_<%= mainIndex %>_hero_subtitle" name="itemDetails[<%= mainIndex %>][hero][subtitle]" value="<%= itemDetail.hero ? itemDetail.hero.subtitle : '' %>" class="form-control">
        </div>
        <div class="form-group">
            <label for="itemDetails_<%= mainIndex %>_hero_backgroundImage">URL de Imagen de Fondo Hero:</label>
            <input type="text" id="itemDetails_<%= mainIndex %>_hero_backgroundImage" name="itemDetails[<%= mainIndex %>][hero][backgroundImage]" value="<%= itemDetail.hero ? itemDetail.hero.backgroundImage : '' %>" class="form-control">
        </div>

        <h4><i class="fas fa-pencil-alt"></i> Introducción del Detalle</h4>
        <div class="form-group">
            <label for="itemDetails_<%= mainIndex %>_intro_paragraph1">Párrafo Introductorio 1:</label>
            <textarea id="itemDetails_<%= mainIndex %>_intro_paragraph1" name="itemDetails[<%= mainIndex %>][intro][paragraph1]" rows="3" class="form-control"><%= itemDetail.intro ? itemDetail.intro.paragraph1 : '' %></textarea>
        </div>
        <div class="form-group">
            <label for="itemDetails_<%= mainIndex %>_intro_paragraph2">Párrafo Introductorio 2:</label>
            <textarea id="itemDetails_<%= mainIndex %>_intro_paragraph2" name="itemDetails[<%= mainIndex %>][intro][paragraph2]" rows="3" class="form-control"><%= itemDetail.intro ? itemDetail.intro.paragraph2 : '' %></textarea>
        </div>
        <div class="form-group">
            <label for="itemDetails_<%= mainIndex %>_intro_paragraph3">Párrafo Introductorio 3:</label>
            <textarea id="itemDetails_<%= mainIndex %>_intro_paragraph3" name="itemDetails[<%= mainIndex %>][intro][paragraph3]" rows="3" class="form-control"><%= itemDetail.intro ? itemDetail.intro.paragraph3 : '' %></textarea>
        </div>

        <h4><i class="fas fa-file-text"></i> Bloques de Contenido del Detalle</h4>
        <div id="item-details-content-sections-container-<%= mainIndex %>">
            <% if (itemDetail.contentSections && itemDetail.contentSections.length > 0) { %>
                <% itemDetail.contentSections.forEach(function(block, contentIndex) { %>
                    <%- include('detailContentBlock', { block: block, mainIndex: mainIndex, contentIndex: contentIndex }); %>
                <% }); %>
            <% } else { %>
                <p class="empty-list-message">Aún no hay bloques de contenido. Añade uno:</p>
            <% } %>
        </div>
        <button type="button" class="add-content-block-btn add-item-button" data-main-index="<%= mainIndex %>"><i class="fas fa-plus-circle"></i> Añadir Bloque de Contenido</button>

        <h4><i class="fas fa-phone"></i> Información de Contacto del Detalle</h4>
        <div class="form-group">
            <label for="itemDetails_<%= mainIndex %>_contactInfo_title">Título de Contacto:</label>
            <input type="text" id="itemDetails_<%= mainIndex %>_contactInfo_title" name="itemDetails[<%= mainIndex %>][contactInfo][title]" value="<%= itemDetail.contactInfo ? itemDetail.contactInfo.title : '' %>" class="form-control">
        </div>
        <div class="form-group">
            <label for="itemDetails_<%= mainIndex %>_contactInfo_companyName">Nombre de la Compañía (Contacto):</label>
            <input type="text" id="itemDetails_<%= mainIndex %>_contactInfo_companyName" name="itemDetails[<%= mainIndex %>][contactInfo][companyName]" value="<%= itemDetail.contactInfo ? itemDetail.contactInfo.companyName : '' %>" class="form-control">
        </div>
        <div class="form-group">
            <label for="itemDetails_<%= mainIndex %>_contactInfo_companyDetail">Detalle de la Compañía (Contacto):</label>
            <input type="text" id="itemDetails_<%= mainIndex %>_contactInfo_companyDetail" name="itemDetails[<%= mainIndex %>][contactInfo][companyDetail]" value="<%= itemDetail.contactInfo ? itemDetail.contactInfo.companyDetail : '' %>" class="form-control">
        </div>
        <div class="form-group">
            <label for="itemDetails_<%= mainIndex %>_contactInfo_phone">Teléfono de Contacto:</label>
            <input type="text" id="itemDetails_<%= mainIndex %>_contactInfo_phone" name="itemDetails[<%= mainIndex %>][contactInfo][phone]" value="<%= itemDetail.contactInfo ? itemDetail.contactInfo.phone : '' %>" class="form-control">
        </div>
        <div class="form-group">
            <label for="itemDetails_<%= mainIndex %>_contactInfo_email">Correo de Contacto:</label>
            <input type="email" id="itemDetails_<%= mainIndex %>_contactInfo_email" name="itemDetails[<%= mainIndex %>][contactInfo][email]" value="<%= itemDetail.contactInfo ? itemDetail.contactInfo.email : '' %>" class="form-control">
        </div>
    </div>
</div>